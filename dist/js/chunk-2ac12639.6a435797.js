(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ac12639"],{"4f41":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"my-box"},[e("div",{staticClass:"my-box__info"},[e("div",{staticClass:"my-box__user-info"},[e("div",{staticClass:"user-info-1"},[e("div",{staticClass:"avatar"},[t.membership.icon&&t.membership.icon.length>10?e("img",{attrs:{src:t.membership.icon,alt:""}}):t.membership.name?e("p",[t._v(t._s(t.membership.name.split("")[0]))]):t._e()]),e("div",[e("p",{staticClass:"font--larger"},[t._v("\n                "+t._s(t.membership.name)+"\n              ")]),e("p",{staticClass:"font--medium"},[t._v("\n                会员ID "+t._s(t.membership.member_id)+"\n              ")])])]),t.otherUserList.length>0?e("div",{staticClass:"other-user"},[e("VanCell",{attrs:{title:"切换账号","is-link":"","arrow-direction":"down"},on:{click:function(s){t.handlePopup("user")}}})],1):t._e()])]),e("div",{staticClass:"my-box__times"},[e("div",[e("p",{staticClass:"font--larger"},[t._v("\n            "+t._s(t.membership.join_time)+"\n          ")]),e("p",{staticClass:"font--medium"},[t._v("\n            加入时间\n          ")])]),e("div",[e("p",{staticClass:"font--larger"},[t._v("\n            "+t._s(t.membership.class_counts)+"节\n          ")]),e("p",{staticClass:"font--medium"},[t._v("\n            上课节数\n          ")])])])]),t._m(0),t._l(t.membership.cards,function(t,s){return e("Card",{key:s,attrs:{card:t}})}),e("VanPopup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(s){t.showPicker=s},expression:"showPicker"}},[e("VanPicker",{attrs:{columns:t.pickerConfig.columns,"show-toolbar":"",title:t.pickerConfig.title},on:{cancel:t.onCancel,confirm:t.onConfirm}})],1)],2)},n=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("h3",{staticClass:"my-card-title"},[t._v("\n        我的会员卡\n      ")])])}];e("7f7f");function a(t){if(Array.isArray(t)){for(var s=0,e=new Array(t.length);s<t.length;s++)e[s]=t[s];return e}}function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){return a(t)||r(t)||c()}var l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"card",class:t.classObject},[e("div",{staticClass:"brand"},[e("span",[t._v("G-STEPS CREW")]),e("span",{staticClass:"brand-name"},[t._v(t._s(t.card.name))])]),e("div",{staticClass:"feature"},[1!==t.card.card_type_id?e("div",{staticClass:"card--timesall card--text-color feature-limit"},[e("span",[t._v(t._s(t.getRemainsInfo.limit))])]):t._e(),1!==t.card.card_type_id?e("div",{staticClass:"card--timesleft card--text-color feature-remains"},[t._v("\n      "+t._s(t.getRemainsInfo.remains)+"\n    ")]):t._e()]),e("div",{staticClass:"decorator card--text-color"},[t._v("\n    /////////////////////////////////\n  ")]),e("div",{staticClass:"footer card--text-color"},[e("span",[t._v("有效期至："+t._s(t.card.deadline))]),e("span",[t._v("卡号："+t._s(t.card.entity_card_id))]),e("span",[t._v(t._s(t.card.status))])])])},d=[],u={props:{card:{type:Object,default:null,required:!0}},computed:{classObject:function(){return{normal:"已激活"===this.card.status,passive:"已激活"!==this.card.status}},getRemainsInfo:function(){var t="";return t=2===this.card.card_type_id?"元":"次",{remains:"剩余".concat(this.card.remains).concat(t),limit:"".concat(this.card.limit).concat(t)}}}},m=u,h=(e("6882"),e("2877")),p=Object(h["a"])(m,l,d,!1,null,"75772e66",null),f=p.exports,_=(e("b970"),{components:{Card:f},data:function(){return{membership:{},otherUserList:[],exchangeUser:null,pickerType:"",showPicker:!1,pickerConfig:{columns:[],title:""}}},created:function(){var t=this;this.$axios.post("/api/membership/detail").then(function(s){t.membership=s.data.res}),this.$axios.post("/api/user/info").then(function(s){t.otherUserList=[],s.data.res&&(s.data.res.child_list&&s.data.res.child_list.length>0&&(t.otherUserList=[].concat(o(t.otherUserList),o(s.data.res.child_list))),s.data.res.parent_list&&s.data.res.parent_list.length>0&&(t.otherUserList=[].concat(o(t.otherUserList),o(s.data.res.parent_list))),s.data.res.siblings_list&&s.data.res.siblings_list.length>0&&(t.otherUserList=[].concat(o(t.otherUserList),o(s.data.res.siblings_list))))})},methods:{logout:function(){this.$axios.post("/api/user/logout").then(function(t){})},handlePopup:function(t){this.showPicker=!0,this.pickerType="user","user"===t&&(this.pickerConfig.title="请选择要切换的账号",this.pickerConfig.columns=[{values:this.otherUserList.map(function(t){return t.name}),defaultIndex:0}])},onCancel:function(){this.showPicker=!1},onConfirm:function(t,s){switch(this.pickerType){case"user":var e=this.otherUserList[s];this.exchangeUser=e,this.$axios.post("/api/user/relationlogin",{relation_user_id:this.exchangeUser.id}).then(function(t){window.location.reload()});break;default:break}this.showPicker=!1}},computed:{}}),v=_,b=(e("5dd7"),Object(h["a"])(v,i,n,!1,null,null,null));s["default"]=b.exports},"5dd7":function(t,s,e){"use strict";var i=e("cc28"),n=e.n(i);n.a},6882:function(t,s,e){"use strict";var i=e("770a"),n=e.n(i);n.a},"770a":function(t,s,e){},"7f7f":function(t,s,e){var i=e("86cc").f,n=Function.prototype,a=/^\s*function ([^ (]*)/,r="name";r in n||e("9e1e")&&i(n,r,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},cc28:function(t,s,e){}}]);
//# sourceMappingURL=chunk-2ac12639.6a435797.js.map